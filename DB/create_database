/* 日程調整Webアプリ用データベース定義 */

DROP DATABASE chosei_db;
DROP USER 'bteam'@'localhost';

CREATE DATABASE chosei_db CHARACTER SET UTF8;
USE chosei_db;

/* イベント作成テーブル */
CREATE TABLE t_event (
	event_id CHAR(50) NOT NULL PRIMARY KEY,		/* イベントID（セッションIDを使う） */
	cookie_id CHAR(50) NOT NULL PRIMARY KEY,	/* 幹事判別 */
	name CHAR(50),			/* 幹事が決めたイベント名 */
	memo CHAR(250)			/* 幹事から参加者へのコメント */
);

/* 顧客テーブル */
CREATE TABLE t_schedule (
	event_id CHAR(50) NOT NULL PRIMARY KEY,		/* t_eventのevent_idを外部キーに持つ */
	day_time CHAR(50)		/* 幹事が決めた日にち候補 */
);

/* 予約テーブル */
CREATE TABLE flight_reservation (
	event_id CHAR(50) NOT NULL PRIMARY KEY,				/* t_eventのevent_idを外部キーに持つ */
	user_id CHAR(50) AUTO INCRIMENT PRIMARY KEY,	/* 参加者の識別ID */
	user_name char(50),	/* 参加者の表示名 */
	day_time INTEGER,		/* t_scheduleのday_timeの外部キー */
	tsugo INTEGER,			/* 都合を数字で保存　2:◯ 1:△ 0:✕ */
	comment CHAR(250)		/* 参加者からのコメント */
);

/* ユーザ宣言 */
CREATE USER 'bteam'@'localhost' IDENTIFIED BY 'kickobe';
GRANT ALL ON chosei_db.* TO  'bteam'@'localhost' IDENTIFIED BY 'kickobe';
