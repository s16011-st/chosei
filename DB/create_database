/* OSS構成特論総合演習課題用データベース定義 */

DROP DATABASE flight_db;
DROP USER 'reservation'@'localhost';

CREATE DATABASE flight_db CHARACTER SET UTF8;
USE flight_db;

/* フライト便情報テーブル */
CREATE TABLE flight_master (
	flight_id INTEGER NOT NULL PRIMARY KEY,		/* 便ID */
	flight_name CHAR(20),				/* 便名 */
	departure_place CHAR(100),			/* 出発地 */
	arrival_place CHAR(100),					/* 到着地 */
	time CHAR(20),					/* 出発時刻 */
	cap_business INTEGER,				/* 座席数（ビジネス） */
	cap_economy INTEGER				/* 座席数（エコノミー） */
);

/* 顧客テーブル */
CREATE TABLE customer_master (
	customer_id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,	/* 顧客番号 */
	password CHAR(100),				/* パスワード */
	customer_name CHAR(100)				/* 氏名 */
);

/* 予約テーブル */
CREATE TABLE flight_reservation (
	reservation_id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,	/* 予約ID */
	year INTEGER,					/* 年 */
	month INTEGER,					/* 月 */
	day INTEGER,					/* 日 */
	customer_id INTEGER,				/* 顧客番号 */
	flight_id INTEGER,				/* 便ID */
	seat_class INTEGER				/* 座席クラス　0：ビジネス 1：エコノミー */
);

/* ユーザ宣言 */
CREATE USER 'reservation'@'localhost' IDENTIFIED BY 'kickickic';
GRANT ALL ON flight_db.* TO  'reservation'@'localhost' IDENTIFIED BY 'kickickic';
